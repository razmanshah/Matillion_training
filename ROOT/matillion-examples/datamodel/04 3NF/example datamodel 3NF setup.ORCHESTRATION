{"job":{"components":{"1212":{"id":1212,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-368,"y":48,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1226,1227,1228],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1213":{"id":1213,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1611478312,"x":-16,"y":-112,"width":32,"height":32,"inputConnectorIDs":[1226],"outputSuccessConnectorIDs":[1224],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create norm_equipment"}}}},"visible":true},"2":{"slot":2,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"3":{"slot":3,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"4":{"slot":4,"name":"New Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_equipment"}}}},"visible":true},"5":{"slot":5,"name":"Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"64"},"4":{"slot":4,"type":"INTEGER","value":""},"5":{"slot":5,"type":"STRING","value":""},"6":{"slot":6,"type":"STRING","value":"Yes"},"7":{"slot":7,"type":"STRING","value":"Yes"},"8":{"slot":8,"type":"STRING","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"256"},"4":{"slot":4,"type":"INTEGER","value":""},"5":{"slot":5,"type":"STRING","value":""},"6":{"slot":6,"type":"STRING","value":"Yes"},"7":{"slot":7,"type":"STRING","value":"No"},"8":{"slot":8,"type":"STRING","value":""}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"},"2":{"slot":2,"type":"STRING","value":"NUMBER"},"3":{"slot":3,"type":"INTEGER","value":"6"},"4":{"slot":4,"type":"INTEGER","value":"0"},"5":{"slot":5,"type":"STRING","value":""},"6":{"slot":6,"type":"STRING","value":"Yes"},"7":{"slot":7,"type":"STRING","value":"No"},"8":{"slot":8,"type":"STRING","value":""}}}},"visible":true},"6":{"slot":6,"name":"Create/Replace","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create if not exists"}}}},"visible":true},"7":{"slot":7,"name":"Clustering Keys","elements":{},"visible":true},"8":{"slot":8,"name":"Data Retention Time in Days","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true},"9":{"slot":9,"name":"Comment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true},"11":{"slot":11,"name":"Primary Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"}}}},"visible":true},"12":{"slot":12,"name":"Table Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Permanent"}}}},"visible":true},"13":{"slot":13,"name":"Default DDL Collation","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1214":{"id":1214,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":144,"y":47,"width":32,"height":32,"inputConnectorIDs":[1222],"outputSuccessConnectorIDs":[1220],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create norm_bubble_event"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATE TABLE IF NOT EXISTS \"${environment_database}\".\"${examples_schema}\".\"norm_bubble_event\" (\n\t\"id\" NUMBER(9,0) NOT NULL UNIQUE\n      DEFAULT \"${environment_database}\".\"${examples_schema}\".\"norm_bubble_event_seq\".NEXTVAL,\n\t\"equipment_id\" VARCHAR(64) NOT NULL,\n\t\"ts\" TIMESTAMP_NTZ NOT NULL,\n\tPRIMARY KEY (\n\t\t\"id\"\n\t)\n)"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1215":{"id":1215,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1611478312,"x":-16,"y":207,"width":32,"height":32,"inputConnectorIDs":[1228],"outputSuccessConnectorIDs":[1223],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create norm_fan_status"}}}},"visible":true},"2":{"slot":2,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"3":{"slot":3,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"4":{"slot":4,"name":"New Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"}}}},"visible":true},"5":{"slot":5,"name":"Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"},"2":{"slot":2,"type":"STRING","value":"NUMBER"},"3":{"slot":3,"type":"INTEGER","value":"6"},"4":{"slot":4,"type":"INTEGER","value":"0"},"5":{"slot":5,"type":"STRING","value":""},"6":{"slot":6,"type":"STRING","value":"Yes"},"7":{"slot":7,"type":"STRING","value":"Yes"},"8":{"slot":8,"type":"STRING","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"VARCHAR"},"3":{"slot":3,"type":"INTEGER","value":"256"},"4":{"slot":4,"type":"INTEGER","value":""},"5":{"slot":5,"type":"STRING","value":""},"6":{"slot":6,"type":"STRING","value":"Yes"},"7":{"slot":7,"type":"STRING","value":"No"},"8":{"slot":8,"type":"STRING","value":""}}}},"visible":true},"6":{"slot":6,"name":"Create/Replace","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Replace"}}}},"visible":true},"7":{"slot":7,"name":"Clustering Keys","elements":{},"visible":true},"8":{"slot":8,"name":"Data Retention Time in Days","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true},"9":{"slot":9,"name":"Comment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true},"11":{"slot":11,"name":"Primary Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"}}}},"visible":true},"12":{"slot":12,"name":"Table Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Permanent"}}}},"visible":true},"13":{"slot":13,"name":"Default DDL Collation","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1216":{"id":1216,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":-16,"y":47,"width":32,"height":32,"inputConnectorIDs":[1227],"outputSuccessConnectorIDs":[1222],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create norm_bubble_event_seq"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CREATE SEQUENCE IF NOT EXISTS \"${environment_database}\".\"${examples_schema}\".\"norm_bubble_event_seq\";\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1217":{"id":1217,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":144,"y":207,"width":32,"height":32,"inputConnectorIDs":[1223],"outputSuccessConnectorIDs":[1221],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Master data"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"INSERT INTO \"${environment_database}\".\"${examples_schema}\".\"norm_fan_status\"\nWITH data AS (SELECT ARRAY_CONSTRUCT('normal', 'malfunctioning', 'unpowered') AS \"statusname\")\nSELECT 1000 + ROW_NUMBER() OVER (ORDER BY value) AS id, value\nFROM data,\nLATERAL FLATTEN (input => \"statusname\") x\nUNION ALL SELECT -1, CAST('Unknown' AS VARIANT)"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1218":{"id":1218,"inputCardinality":"MANY","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":235671163,"x":400,"y":48,"width":32,"height":32,"inputConnectorIDs":[1220,1221,1224],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[1225],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"1219":{"id":1219,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1896325668,"x":512,"y":48,"width":32,"height":32,"inputConnectorIDs":[1225],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"example datamodel ODS to 3NF 0"}}}},"visible":true},"2":{"slot":2,"name":"Transformation Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"example datamodel ODS to 3NF"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"1220":{"id":1220,"sourceID":1214,"targetID":1218},"1221":{"id":1221,"sourceID":1217,"targetID":1218},"1222":{"id":1222,"sourceID":1216,"targetID":1214},"1223":{"id":1223,"sourceID":1215,"targetID":1217},"1224":{"id":1224,"sourceID":1213,"targetID":1218}},"failureConnectors":{},"unconditionalConnectors":{"1225":{"id":1225,"sourceID":1218,"targetID":1219},"1226":{"id":1226,"sourceID":1212,"targetID":1213},"1227":{"id":1227,"sourceID":1212,"targetID":1216},"1228":{"id":1228,"sourceID":1212,"targetID":1215}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{"1207":{"id":1207,"x":-112,"y":-17,"width":383,"height":123,"text":"Create **norm_bubble_event** with a primary key defined by a SEQUENCE","colour":"00ce4f"},"1208":{"id":1208,"x":-110,"y":138,"width":381,"height":129,"text":"Create **norm_fan_status**.\nIt contains ``fixed`` master data, so it is fine to recreate every time","colour":"00ce4f"},"1209":{"id":1209,"x":-110,"y":-166,"width":195,"height":107,"text":"Create the **norm_equipment** table","colour":"00ce4f"},"1210":{"id":1210,"x":-614,"y":127,"width":303,"height":163,"text":"If you look at the data in the raw, staging or ODS tables (raw_iot_event, stg_iot_event or ods_iot_event) you will see a lot of duplicated values.\n\nThese three 3rd Normal Form tables contain the same data but they are **subject oriented**, which makes it more efficient and less vulnerable to problems.\n\nThese tables should not often get dropped and recreated, so the option here is usually \"Create if not exists\"","colour":"00ce4f"},"1211":{"id":1211,"x":-732,"y":-199,"width":403,"height":164,"text":"``Run this job after completing 03 ODS``\n\nThis is an example of an ODS-to-3NF data transformation.\n\n3NF data structures represent the data in the most highly structured way. Data is converted from its ODS model into this centralized, unified, subject-oriented model. More discussion on this at [[https://www.matillion.com/resources/developer-relations/database-schema-types-examples-and-benefits]]\n\nAn 3NF layer should contain ``all`` the data from ``all`` the relevant source systems.","colour":"00ce4f"}},"variables":{},"grids":{}},"info":{"name":"example datamodel 3NF setup","description":"","type":"ORCHESTRATION","tag":"d1ac3b8c-5ef5-4780-9505-cbfa1e12678a"}}